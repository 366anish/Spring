buildscript {
    repositories {
        mavenLocal()
        maven {url "http://maven.oschina.net/content/groups/public/"}
        mavenCentral()
        jcenter()
    }

    dependencies {
        classpath 'com.bmuschko:gradle-tomcat-plugin:2.5'
    }
}

apply plugin: "java"
apply plugin: "war"
apply plugin: "eclipse"
//tomcat plugin:
apply plugin: "com.bmuschko.tomcat"
sourceCompatibility = 1.8
version = "0.0.1-SNAPSHOT"
group 'org.springframework'
war.baseName = "lengwj-spring"
project.webAppDirName = "src/main/webapp"


sourceSets {
    main{
        resources.srcDirs = ["src/main/java"]    //引入资源文件，打包时才会将配置文件植入war文件
    }
    main.compileClasspath += configurations.provided
    test.compileClasspath += configurations.provided
    test.runtimeClasspath += configurations.provided
}


dependencies {
    compile project(":spring-context")
    compile project(":spring-core")
    compile project(":spring-beans")
    compile project(":spring-aspects")
    compile project(":spring-aop")
    compile project(":spring-jdbc")
    compile project(":spring-tx")
    compile project(":spring-web")
    compile project(":spring-webmvc")

    // https://mvnrepository.com/artifact/javax.inject/javax.inject
    compile group: 'javax.inject', name: 'javax.inject', version: '1'

    // https://mvnrepository.com/artifact/org.aspectj/aspectjweaver
    compile group: 'org.aspectj', name: 'aspectjweaver', version: '1.8.14'

    compile group: 'org.mybatis', name: 'mybatis-spring', version: '1.3.2'

    // https://mvnrepository.com/artifact/org.mybatis/mybatis
    compile group: 'org.mybatis', name: 'mybatis', version: '3.4.6'

    // https://mvnrepository.com/artifact/mysql/mysql-connector-java
    compile group: 'mysql', name: 'mysql-connector-java', version: '5.1.38'

    // https://mvnrepository.com/artifact/com.mchange/c3p0
    compile group: 'com.mchange', name: 'c3p0', version: '0.9.5.2'

    compile group: 'junit', name: 'junit', version: '4.12'

    compile group: 'com.alibaba', name: 'druid', version: '1.1.10'

    // https://mvnrepository.com/artifact/org.apache.tomcat.embed/tomcat-embed-core
    compile group: 'org.apache.tomcat.embed', name: 'tomcat-embed-core', version: '8.5.43'

    provided "javax.servlet:javax.servlet-api:4.+"

    // https://mvnrepository.com/artifact/commons-logging/commons-logging
    compile group: 'commons-logging', name: 'commons-logging', version: '1.1.1'
//
//    // https://mvnrepository.com/artifact/org.apache.logging.log4j/log4j-core
//    compile group: 'org.apache.logging.log4j', name: 'log4j-core', version: '2.11.1'

    // https://mvnrepository.com/artifact/log4j/log4j
    compile group: 'log4j', name: 'log4j', version: '1.2.17'


    def tomcatVersion = '8.0.27'
    tomcat    "org.apache.tomcat.embed:tomcat-embed-core:${tomcatVersion}",
            "org.apache.tomcat.embed:tomcat-embed-logging-juli:${tomcatVersion}",
            "org.apache.tomcat.embed:tomcat-embed-jasper:${tomcatVersion}"

}


tomcatRun.contextPath = '/lengwj-spring'
tomcatRunWar.contextPath = '/lengwj-spring'